
## 1. 네트워크 구성 요소와 흐름
- 인터넷의 본질: 독립된 수많은 네트워크들이 서로 연결된 '네트워크의 네트워크'
- 핵심 요소:
	- **Host**: 네트워크에 연결된 장치 (PC, Server, 스마트폰 등)
	- **Router**: 패킷의 목적지를 찾아 최적의 경로로 전달하는 이정표
	- **DNS**: 도메인 이름을 IP 주소로 변환해주는 전화번호부
	- **ISP**: 인터넷 서비스를 제공하는 통신사

	패킷 통신
	- 데이터를 한번에 보내지 않고 작은 단위(패킷)로 나누어 전송
	- 각 패킷에는 출발지/목적지 정보가 담긴 '헤더'가 붙어있음.
	  -> 네트워크 혼잡 시에도 유연하게 경로 찾아갈 수 있음

## 2. OSI 7계층과 TCP/IP모델
|계층|역할|주요 프로토콜/데이터|진단 도구|
|---|---|---|---|
|**L7 응용**|사용자 인터페이스, 서비스 제공|HTTP, DNS, FTP|`nslookup`, `curl`|
|**L4 전송**|프로세스 간 연결, 신뢰성 보장|TCP, UDP (Port)|`telnet`, `nc`|
|**L3 네트워크**|호스트 간 경로 배정 (IP)|IP, ICMP (Packet)|`ping`, `traceroute`|
|**L2 데이터링크**|물리적 매체 간 연결 (MAC)|Ethernet (Frame)|`arp`|
주소 체계의 이해
	- IP: 아파트의 동 - 어느 건물(호스트)를 찾아가야하는지 결정
	- Port: 아파트의 호수 - 건물 안의 어떤 집(특정 프로세스/서비스)에 배달할지 결정
	- MAC: 실제 거주자의 주민번호 - 장치 자체가 가진 고유한 물리적 식별자

**트러블 슈팅**
1. 도메인 접속 불가 (DNS 확인)
	- 증상  - google.com 접속은 안되는데, 8.8.8.8(IP)로 핑은 가는 경우
	- L3(네트워크)는 정상이나 L7(DNS) 설정 문제
	- `nslookup google.com`을 쳤을 때 IP를 못 받아온다면 DNS 서버 설정 확인

2. 서버는 살아있는데 웹페이지가 안뜸 (Port 확인)
	- 증상  - ping은 잘 가는데 브라우저에서 접속이 안되는 경우
	- L3는 정상이나 L4(전송)의 특정 포트가 닫혀있거나, 방화벽에서 차단됨
	- `nc -zv [IP] 80` 또는 `telnet [IP] 80`으로 포트가 Open 상태인지 확인

3. 특정 구간부터 통신이 끊김 (경로 확인)
	- 증상  - 내부망에서는 되는데 외부망 나가면 응답이 없음
	- 내 PC나 서버의 문제가 아닌 중간에 거치는 L3(Router)나 ISP 구간 장애
	- `traceroute [목적지 IP]`를 실행하여 어느 지점(Hop)에서 패킷이 멈추는지 확인

4. 인터넷 자체가 안되는 경우 (물리 / 링크 확인)
	- 증상  - 핑(루프백)은 가는데 게이트웨이(공유기)로 핑이 안나감
	- 랜선이 빠졌거나(L1) 공유기와 내 PC 사이의 L2(데이터링크) 통신 문제
	- `ipconfig` 또는 `ifconfig`로 IP 할당 받았는지 확인 혹은 랜선 확인

## 3. TCP vs UDP
**TCP (Transmission Control Protocol)**
	-  특징: 연결형 , 신뢰성 보장, 순서 보장, 흐름 제어
	- 3-way Handshake: 통신 전 3단계의 확인 절차를 거침
		- 클라이언트 -> SYN -> 서버 -> SYN + ACK -> 클라이언트 -> ACK -> 연결 완료
	- 용도: HTTP, 이메일, 파일 전송 등 데이터 유실이 없어야하는 서비스
**UDP (User Datagram Protocol)**
	- 특징: 비연결형, 빠른 속도, 확인절차 없음(일방적 전송)
	- 용도: 실시간 스트리밍, 온라인 게임, 보이스톡 등 속도가 중요한 서비스

## 4. 네트워크 보안 장비의 역할

**방화벽(Firewall)**
	- 역할: IP와 Port를 기준으로 허용되지 않은 접근을 차단하는 역할
	- 한계: 정상 포트로 들어오는 공격 데이터(Payload)내부를 분석하기는 어려움

**IDS/IPS**
	- IDS(탐지): 공격 패턴을 감지하여 관리자에게 알림을 보냄
	- IPS(차단): 감지를 넘어 공격 패킷을 즉시 차단
**방화벽은 '주소'를 보지만, IDS/IPS는 데이터의 '내용'을 본다.**

**VPN(Virtual Private Network**
	-역할: 공용 인터넷망을 마치 전용선처럼 안전하게 사용하는 암호화 터널이다.
	- 클라우드 활용: 재택 근무자가 회사 내부망(Private Subnet)에 안전하게 접속하기 위해 필수적으로 사용
	- 1. Remote Access VPN (Client-to-Site)
		- 사용: 개별 사용자가 외부에서 사내 내부망에 접속할 때 사용
		- 자신의 노트북에 VPN 소프트웨어를 설치하여 회사 서버에 접근하는 경우
	- 2. Site-to-Site VPN
		- 사용: 멀리 떨어진 두 지점의 네트워크 자체를 하나로 연결할때 사용
		- 본사 데이터센터와 지사 사무실의 네트워크를 공용 인터넷을 통해 안전하게 통합하여 마치 한 건물에 있는 것처럼 통신하는 경우

## 5. VPC & Subnet

**VPC(Virtual Private Cloud)**:
	-정의: 클라우드 내에서 논리적으로 격리된 사용자 전용 가상 네트워크
	-CIDR(Classless Inter-Domain Routing): VPC의 IP 범위를 설정하는 방식 (예: ``10.0.0.0/16``)
		- `/숫자`가 작을 수록 할당 가능한 IP 개수가 많아짐 (/16: 65,536 /20: 4,096 /24: 256, /28:16)
		- 설계 시 향후 확장성을 고려하여 범위 잡는게 중요(근데 보통 VPC는 /16많이씀)

**Subnet & AZ**
	- Subnet: VPC를 더 작은 단위로 쪼갠 네트워크 (보통 VPC가 /16이면 서브넷은 더 작게 설계)
	- AZ와의 관계: 고가용성을 위해 여러 AZ에 서브넷을 분산 배치하는 것이 설계의 핵심
	  -> AZ별로 동일한 용도의 서브넷을 각각 만든다
	  -> AWS기준 Subnet은 AZ에 귀속된다.

## 6.Routing & Gateway - 트래픽 흐름의 핵심

**라우팅 테이블** 
	- 패킷이 어디로 가야할지 결정하는 이정표
	- Public vs Private Subnet: 라우팅 테이블에 인터넷게이트웨이(IGW)로 가는 경로가 있으면 Public 없으면 Private 서브넷으로 구분

**인터넷 접속 도구**
	- IGW (Internet Gateway): VPC 내부 자원이 인터넷과 양방향으로 통신할 수 있게 해주는 문
	- NAT Gateway: Private 서브넷의 자원이 인터넷으로 나갈 수만 있게(Outbound)해주는 장치


## 7. 이중보안계층: SG vs NACL
| 구분        | Security Group (보안 그룹)      | NACL (Network ACL)               |
| --------- | --------------------------- | -------------------------------- |
| **적용 단위** | 인스턴스(ENI) 단위                | 서브넷 단위                           |
| **상태 관리** | **Stateful** (나간 패킷은 응답 허용) | **Stateless** (들어오고 나가는 걸 각각 설정) |
| **설정 방식** | 허용(Allow) 규칙만 가능            | 허용 및 차단(Deny) 규칙 모두 가능           |
| **우선순위**  | 모든 규칙을 검토 후 적용              | 규칙 번호 순서대로 적용                    |

**Bastion Host(점프 서버)**
	- 외부에서 Private 서브넷의 서버에 관리 목적으로 접속하기 위한 단일 진입점
	- 접근 지점을 하나로 모아 통제함으로써 보안 표면적을 줄이는 역할

## 8. 네트워크 성능 지표

1. Latency (지연 시간): 데이터가 출발지에서 목적지까지 도달하는데 걸리는 시간.
2. Packet Loss(손실): 전송 중 유실된 패킷의 비율 (TCP 재전송의 원인이 됨)
3. Throughput(처리량): 단위 시간당 전송되는 데이터의 양
4. Jitter(지터): 지연시간의 변화 폭 (실시간 통신 품질에 큰 영향)

## 9. 장애 대응 프로세스: Runbook

**Runbook (운영 메뉴얼)**
	- 장애 발생 시 누가 대응하더라도 동일한 품질로 해결할 수 있도록 만든 표준 절차서
	- 필수 구성: 증상 정의, 영향 범위 확인, 즉시 조치 방법(Mitigation), 원인 파악 절차

트러블슈팅의 정석: 구간 분리
	- 성능 저하 발생 시 **\[클라이언트 - 네트워크 - 서버 인프라 -어플리케이션\]** 중 어디가 병목인지 지표를 통해 범위를 좁히는게 핵심

참고: 네트워크 설계는 Gateway/Subnet 뿐만 아니라 SG/NACL/IAM이 함께 설계되어야함