# 🌐 AWS SAA 합격 노트: EC2 네트워크 & 배치 전략

이 노트는 EC2의 성능 극대화를 위한 배치 전략과 네트워크 구성 요소인 ENI, 그리고 운영 효율을 위한 절전 모드에 대해 다룹니다.

## 1. IP 주소 체계 (IPv4 vs IPv6)

- **IPv4:** 점으로 구분된 4개의 숫자 집합. 현재 가장 널리 사용되지만 주소가 부족함.
    
- **IPv6:** 숫자와 문자의 조합. 주소 고갈 문제를 해결하며 주로 IoT나 특정 모던 아키텍처에서 사용.
    
- **Elastic IP (탄력적 IP):** * 인스턴스를 중지/시작해도 변하지 않는 **고정 공용 IP**.
    
    - **주의:** 현재 AWS 정책상 사용 여부와 상관없이 모든 공용 IPv4에 대해 비용이 발생하므로 신중히 사용해야 함.
        

## 2. EC2 배치 그룹 (Placement Groups)

사용자가 AWS 하드웨어 위에 인스턴스가 어떻게 물리적으로 배치될지 결정하는 전략입니다.

### ① Cluster (클러스터)

- **특징:** 하나의 가용 영역(AZ) 내에서 인스턴스들을 서로 가깝게 배치.
    
- **장점:** 매우 낮은 네트워크 지연 시간(Low Latency)과 높은 대역폭(10Gbps+).
    
- **단점:** 해당 AZ나 랙(Rack) 장애 시 그룹 내 모든 인스턴스가 동시에 영향을 받음.
    
- **사용 사례:** 빅데이터 분석, 고성능 컴퓨팅(HPC).
    

### ② Spread (분산)

- **특징:** 인스턴스를 각각 **서로 다른 물리적 하드웨어(랙)**에 배치.
    
- **장점:** 개별 하드웨어 장애가 다른 인스턴스에 영향을 주지 않음 (고가용성).
    
- **제한:** **가용 영역(AZ)당 최대 7대**까지만 배치 가능.
    
- **사용 사례:** 높은 가용성이 필수적인 크리티컬한 애플리케이션.
    

### ③ Partition (파티션)

- **특징:** 인스턴스들을 여러 파티션(랙 집합)으로 나눔. 파티션끼리는 하드웨어를 공유하지 않음.
    
- **장점:** 수백 개의 인스턴스로 확장이 가능하며 파티션 단위의 장애 격리 가능.
    
- **사용 사례:** HDFS, HBase, Cassandra, Kafka 등 대규모 분산 데이터 시스템.
    

## 3. 탄력적 네트워크 인터페이스 (ENI)

VPC 내부의 가상 네트워크 카드입니다.

- **속성:** 프라이빗 IP, 보조 IP, 보안 그룹, MAC 주소 등을 가짐.
    
- **이동성:** 인스턴스에서 분리하여 동일한 AZ 내의 다른 인스턴스로 이동 가능 (장애 조치/Failover 용도).
    
- **제한 사항:**
    
    1. **AZ 귀속:** ENI는 생성된 가용 영역(AZ)에 묶여 있으며, **다른 AZ로 이동할 수 없음**.
        
    2. **기본 ENI:** 인스턴스 생성 시 생기는 Primary ENI(eth0)는 삭제하거나 분리할 수 없음.
        

## 4. 서브넷(Subnet)과 AZ의 물리적 관계

- **서브넷:** VPC를 쪼갠 논리적 주소 구역으로, 반드시 **하나의 AZ에 귀속**됨.
    
- **인스턴스 배치:** 서브넷에 인스턴스를 만들면 해당 AZ의 물리적 데이터 센터 중 한 곳에 배치됨.
    
- **ENI 이동의 원리:** 동일 AZ 내에서만 ENI 이동이 가능한 이유는 물리적으로 같은 단지 내에서 네트워크 경로를 재설정할 수 있기 때문임.
    

## 5. EC2 최대 절전 모드 (Hibernate)

- **원리:** 인스턴스 중지 시 **RAM 상태를 루트 EBS 볼륨에 파일 형태로 저장**하고 전원을 끔.
    
- **장점:** 다시 시작할 때 OS 부팅 과정을 생략하고 애플리케이션 상태(캐시 등)가 유지되어 매우 빠르게 복구됨.
    
- **필수 조건:**
    
    - **EBS 암호화:** RAM 데이터를 저장하므로 루트 볼륨 암호화가 반드시 필요함.
        
    - **용량 제한:** RAM 크기가 150GB 미만이어야 함.
        
    - **지원 불가:** 베어 메탈(Bare Metal) 인스턴스는 지원하지 않음.
	    - 그래서 보통 On-demand , RI, Spot Instance에 지원됨

## 💡 Exam Alert (시험 적중 포인트)

1. **네트워크 성능**이 최우선이고 단일 AZ 내 작업이다? → **Cluster Placement Group**
    
2. **하드웨어 장애 격리**가 최우선이고 소수 인스턴스다? → **Spread Placement Group**
    
3. **Kafka/Cassandra** 같은 대규모 분산 시스템이다? → **Partition Placement Group**
    
4. **ENI 이동** 문제 → 반드시 **"같은 AZ 내"** 인스턴스인지 확인.
    
5. **Hibernate** 문제 → 반드시 **"EBS Encryption(암호화)"**이 되어 있는지 확인.