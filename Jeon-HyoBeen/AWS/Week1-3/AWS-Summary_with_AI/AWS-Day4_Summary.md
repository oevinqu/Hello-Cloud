# 🔐 보안 그룹 & 💰 EC2 구매 옵션 핵심 정리

이 섹션은 SAA 시험에서 가장 자주 출제되는 '비용 최적화'와 '네트워크 보안'의 핵심을 다룹니다.

## 1. 보안 그룹 (Security Groups) 상세

### 영어 노트 교정 및 보완

- **Allow rules only:** 보안 그룹에는 `Deny` 규칙을 만들 수 없습니다. (나중에 배울 NACL과 큰 차이점입니다.)
    
- **Stateful (상태 유지):** 인바운드 규칙으로 트래픽이 허용되어 들어왔다면, 나가는 아웃바운드 규칙에 상관없이 응답 패킷은 자동으로 나갑니다.
    
- **Connection Refused:** 소프트웨어나 포트 문제.
    
- **Time Out:** 보안 그룹(방화벽) 문제.
    

### 한글 복습 노트 보완

- **보안 그룹 간 참조 (Security Group Reference):** 인스턴스에 접근을 허용할 때 특정 IP 대역(`0.0.0.0/0`)이 아니라 **"다른 보안 그룹 ID"** 자체를 허용할 수 있습니다. (예: 웹 서버 SG의 접속만 DB SG에서 허용). 시험에 매우 자주 나옵니다.
    
- **VPC 전용:** 보안 그룹은 특정 VPC 내에서 생성되며, 리전을 벗어날 수 없습니다.
    

## 2. EC2 구매 옵션 (Purchasing Options) 비교

|옵션|핵심 특징|추천 시나리오|
|---|---|---|
|**On-Demand**|약정 없음, 초 단위 과금|단기 작업, 예측 불가능한 부하|
|**Reserved (RI)**|1/3년 약정, 최대 72% 할인|**Steady-state** (꾸준한 DB 서버 등)|
|**Savings Plans**|시간당 $ 약정, 유연성 높음|인스턴스 타입을 바꿀 가능성이 클 때|
|**Spot**|최대 90% 할인, 회수 가능성 있음|**Batch 작업**, 중단 가능한 분석 업무|
|**Dedicated Host**|물리 서버 전체 점유 + **코어 제어**|**BYOL (기존 소프트웨어 라이선스)** 규정 준수|
|**Dedicated Instance**|하드웨어만 점유 (코어 제어 불가)|규정상 하드웨어 공유만 피해야 할 때|
|**Capacity Reservation**|특정 AZ에 용량 확보 (할인 X)|반드시 특정 시간/위치에 서버가 켜져야 할 때|

## 3. SSH 및 접속 보안 (Best Practices)

- **Key Pair 관리:** `.pem` 파일 권한은 반드시 `chmod 400`으로 설정해야 합니다 (나만 읽기 가능).
    
- **IAM Role 활용:** EC2 내부에서 AWS CLI를 쓸 때, `aws configure`로 Access Key를 입력하지 마세요. 대신 **IAM Role**을 인스턴스에 할당하는 것이 보안의 정석입니다.
    
- **Instance Connect:** 포트 22번을 열어두어야 브라우저 기반의 Instance Connect도 작동합니다.
    

## 💡 시험 적중 포인트 (Exam Alert)

1. "기존의 복잡한 라이선스 모델(Socket/Core 단위)을 그대로 써야 한다" -> **Dedicated Host**
    
2. "인스턴스 종류(M패밀리에서 C패밀리로)를 나중에 바꿀 것 같다" -> **Convertible RI** 또는 **Savings Plans**
    
3. "최대 비용 절감이 목표고 작업이 중단되어도 된다" -> **Spot Instance**
    
4. "애플리케이션 접속 시 응답 없음(Timeout)이 발생한다" -> **보안 그룹 인바운드 규칙** 확인

---
# 🏢 Dedicated Instances vs Dedicated Hosts 완벽 비교

두 옵션 모두 "남과 하드웨어를 공유하지 않는다"는 공통점이 있지만, **제어권**과 **사용 목적**에서 큰 차이가 납니다.

### 1. Dedicated Instances (전용 인스턴스)

- **개념:** 내가 사용하는 인스턴스가 실행되는 물리적 서버에 다른 고객의 인스턴스가 배치되지 않습니다.
    
- **특징:** * 하드웨어 수준에서 격리됩니다.
    
    - 하지만 내가 정확히 어느 물리 서버에 있는지, 코어가 몇 개인지 알 수 없습니다.
        
    - 인스턴스를 중지 후 시작하면 다른 물리 서버(전용 하드웨어)로 이동할 수 있습니다.
        
- **주요 목적:** 기업 보안 규정상 "다른 회사와 같은 기계를 쓰지 마라"는 조건만 맞추면 될 때 사용합니다.
    

### 2. Dedicated Hosts (전용 호스트)

- **개념:** 실제 물리적 서버 한 대를 통째로 예약해서 사용하는 방식입니다.
    
- **특징:**
    
    - **물리적 가시성:** 서버의 소켓 수, 물리적 코어 수를 직접 확인할 수 있습니다.
        
    - **배치 제어:** 내가 원하는 인스턴스를 특정 호스트의 어느 위치에 올릴지 직접 결정할 수 있습니다.
        
    - **고정성:** 인스턴스를 껐다 켜도 내가 빌린 그 '물리 서버' 그 자리에 그대로 있습니다.
        
- **주요 목적 (핵심):** * **BYOL (Bring Your Own License):** 윈도우나 SQL Server 등 "물리적 코어/소켓 수"에 따라 라이선스 비용을 내야 하는 소프트웨어를 쓸 때 반드시 필요합니다.
    
    - 가장 높은 수준의 규정 준수가 필요할 때 사용합니다.
        

### 💡 한눈에 보는 비교표

|구분|Dedicated Instances|Dedicated Hosts|
|---|---|---|
|**격리 수준**|물리 서버 단위 격리|물리 서버 전체 점유|
|**물리 코어 제어**|불가|**가능 (가시성 제공)**|
|**라이선스(BYOL)**|지원하지 않음 (대부분)|**완벽 지원 (핵심 용도)**|
|**비용**|비교적 저렴 (인스턴스 단위)|가장 비쌈 (서버 단위)|
|**자동 배치**|AWS가 알아서 배치함|사용자가 직접 배치 제어 가능|

### 🔑 시험 문제 키워드

- "다른 고객과 하드웨어 공유 금지" → **둘 다 가능** (비용 효율적이면 Instances)
    
- "기존 라이선스(BYOL) 유지", "소켓/코어 단위 가시성 필요" → **무조건 Dedicated Hosts**